<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="documenation cocoapods objective-c packcage manager" name="keywords" /><title>Installer</title><link href="../../../favicon.ico" rel="icon" type="image/ico" /><link href="../../../css/bootstrap.min-52b04d8e.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../../../css/font-awesome-a5000aac.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../../../css/style-fc0fe55f.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../../../css/style2-6993d0a5.css" media="screen" rel="stylesheet" type="text/css" /><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script><script src="../../../js/javascript-46faf48a.js" type="text/javascript"></script>
<script src="../../../js/bootstrap.min-e0886b3c.js" type="text/javascript"></script></head><body><div class="container"><div id="body"><div id="sections-container"><ul class="breadcrumb"><li id="logo"><a href="http://cocoapods.org">CocoaPods</a><span class="divider">/</span></li><li><a href="../../../index.html">Docs</a><span class="divider">/</span></li><li><a href="../../index.html">CocoaPods</a><span class="divider">/</span></li><li><a href="../index.html">Pod</a><span class="divider">/</span></li><li class="active">Installer</li></ul></div><div class="page-container"><div id="tab-controller"><div id="methods-container"><div id="header"><h1><a class="select-tab" href="#tab_installer">Installer</a></h1></div></div><div class ='methods_list'><div class ='row'><div class ='span3'><p><a class='select-tab' href=#tab_sandbox>sandbox</a></p><p><a class='select-tab' href=#tab_podfile>podfile</a></p><p><a class='select-tab' href=#tab_lockfile>lockfile</a></p><p><a class='select-tab' href=#tab_update_mode>update_mode</a></p><p><a class='select-tab' href=#tab_initialize>initialize</a></p><p><a class='select-tab' href=#tab_install_bang>install!</a></p><p><a class='select-tab' href=#tab_analyze>analyze</a></p><p><a class='select-tab' href=#tab_pods_added_from_the_lockfile>pods_added_from_the_lockfile</a></p><p><a class='select-tab' href=#tab_pods_changed_from_the_lockfile>pods_changed_from_the_lockfile</a></p><p><a class='select-tab' href=#tab_pods_deleted_from_the_lockfile>pods_deleted_from_the_lockfile</a></p><p><a class='select-tab' href=#tab_pods_unchanged_from_the_lockfile>pods_unchanged_from_the_lockfile</a></p><p><a class='select-tab' href=#tab_locked_dependencies>locked_dependencies</a></p></div><div class ='span3'><p><a class='select-tab' href=#tab_specs_by_target>specs_by_target</a></p><p><a class='select-tab' href=#tab_specifications>specifications</a></p><p><a class='select-tab' href=#tab_local_pods_by_target>local_pods_by_target</a></p><p><a class='select-tab' href=#tab_local_pods>local_pods</a></p><p><a class='select-tab' href=#tab_pods_to_install>pods_to_install</a></p><p><a class='select-tab' href=#tab_pods_project>pods_project</a></p><p><a class='select-tab' href=#tab_target_installers>target_installers</a></p><p><a class='select-tab' href=#tab_generate_pods_by_podfile_state>generate_pods_by_podfile_state</a></p><p><a class='select-tab' href=#tab_display_pods_by_lockfile_state>display_pods_by_lockfile_state</a></p><p><a class='select-tab' href=#tab_update_repositories_if_needed>update_repositories_if_needed</a></p><p><a class='select-tab' href=#tab_generate_locked_dependencies>generate_locked_dependencies</a></p><p><a class='select-tab' href=#tab_resolve_dependencies>resolve_dependencies</a></p></div><div class ='span3'><p><a class='select-tab' href=#tab_generate_pods_that_should_be_installed>generate_pods_that_should_be_installed</a></p><p><a class='select-tab' href=#tab_generate_local_pods>generate_local_pods</a></p><p><a class='select-tab' href=#tab_prepare_for_legacy_compatibility>prepare_for_legacy_compatibility</a></p><p><a class='select-tab' href=#tab_clean_global_support_files>clean_global_support_files</a></p><p><a class='select-tab' href=#tab_clean_removed_pods>clean_removed_pods</a></p><p><a class='select-tab' href=#tab_clean_pods_to_install>clean_pods_to_install</a></p><p><a class='select-tab' href=#tab_install_dependencies>install_dependencies</a></p><p><a class='select-tab' href=#tab_install_local_pod>install_local_pod</a></p><p><a class='select-tab' href=#tab_download_pod>download_pod</a></p><p><a class='select-tab' href=#tab_generate_docs_if_needed>generate_docs_if_needed</a></p><p><a class='select-tab' href=#tab_install_targets>install_targets</a></p><p><a class='select-tab' href=#tab_prepare_pods_project>prepare_pods_project</a></p></div><div class ='span3'><p><a class='select-tab' href=#tab_generate_target_installers>generate_target_installers</a></p><p><a class='select-tab' href=#tab_add_source_files_to_pods_project>add_source_files_to_pods_project</a></p><p><a class='select-tab' href=#tab_run_pre_install_hooks>run_pre_install_hooks</a></p><p><a class='select-tab' href=#tab_run_post_install_hooks>run_post_install_hooks</a></p><p><a class='select-tab' href=#tab_generate_target_support_files>generate_target_support_files</a></p><p><a class='select-tab' href=#tab_generate_dummy_source>generate_dummy_source</a></p><p><a class='select-tab' href=#tab_write_pod_project>write_pod_project</a></p><p><a class='select-tab' href=#tab_write_lockfiles>write_lockfiles</a></p><p><a class='select-tab' href=#tab_integrate_user_project>integrate_user_project</a></p><p><a class='select-tab' href=#tab_config>config</a></p></div></div></div></div><div id="content-container"><div class="tab-content"><div class="tab-pane" id="tab_installer"><h2>Installer</h2><p>The <code><a href="index.html">Installer</a></code> is the core of CocoaPods. This class is responsible of
taking a Podfile and transform it in the Pods libraries. This class also
integrates the user project so the Pods libraries can be used out of the
box.</p>

<p>The Installer is capable of doing incremental updates to an existing Pod
installation.</p>

<p>The Installer gets the information that it needs mainly from 3 files:</p>

<ul>
<li>Podfile: The specification written by the user that contains
information about targets and Pods.</li>
<li>Podfile.lock: Contains information about the pods that were previously
installed and in concert with the Podfile provides information about
which specific version of a Pod should be installed. This file is
ignored in update mode.</li>
<li>Manifest.lock: A file contained in the Pods folder that keeps track of
the pods installed in the local machine. This files is used once the
exact versions of the Pods has been computed to detect if that version
is already installed. This file is not intended to be kept under source
control and is a copy of the Podfile.lock.</li>
</ul>

<p>Once completed the installer should produce the following file structure:</p>
<div class="highlight"><pre><span class="no">Pods</span>
<span class="o">|</span>
<span class="o">+--</span> <span class="no">Headers</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="no">Build</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">+--</span> <span class="o">[</span><span class="no">Pod</span> <span class="no">Name</span><span class="o">]</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="no">Public</span>
<span class="o">|</span>       <span class="o">+--</span> <span class="o">[</span><span class="no">Pod</span> <span class="no">Name</span><span class="o">]</span>
<span class="o">|</span>
<span class="o">+--</span> <span class="no">Sources</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="o">[</span><span class="no">Pod</span> <span class="no">Name</span><span class="o">]</span>
<span class="o">|</span>
<span class="o">+--</span> <span class="no">Specifications</span>
<span class="o">|</span>
<span class="o">+--</span> <span class="no">Target</span> <span class="no">Support</span> <span class="no">Files</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="o">[</span><span class="no">Target</span> <span class="no">Name</span><span class="o">]</span>
<span class="o">|</span>       <span class="o">+--</span> <span class="no">Acknowledgements</span><span class="o">.</span><span class="n">markdown</span>
<span class="o">|</span>       <span class="o">+--</span> <span class="no">Acknowledgements</span><span class="o">.</span><span class="n">plist</span>
<span class="o">|</span>       <span class="o">+--</span> <span class="no">Pods</span><span class="o">.</span><span class="n">xcconfig</span>
<span class="o">|</span>       <span class="o">+--</span> <span class="no">Pods</span><span class="o">-</span><span class="n">prefix</span><span class="o">.</span><span class="n">pch</span>
<span class="o">|</span>       <span class="o">+--</span> <span class="no">PodsDummy_Pods</span><span class="o">.</span><span class="n">m</span>
<span class="o">|</span>
<span class="o">+--</span> <span class="no">Manifest</span><span class="o">.</span><span class="n">lock</span>
<span class="o">|</span>
<span class="o">+--</span> <span class="no">Pods</span><span class="o">.</span><span class="n">xcodeproj</span>
</pre></div><h3>Inherits from:</h3><p><code><a href="../../../xcodeproj/object/index.html">Object</a></code></p><h3>Child Name Spaces</h3><p><code><a href="targetinstaller/index.html">Pod::Installer::TargetInstaller</a></code></p><p><code><a href="userprojectintegrator/index.html">Pod::Installer::UserProjectIntegrator</a></code></p></div><div class="tab-pane" id="tab_group_"><h2></h2><p>sandbox</p><p>podfile</p><p>lockfile</p><p>update_mode</p><p>initialize</p><p>install!</p><p>analyze</p><p>pods_added_from_the_lockfile</p><p>pods_changed_from_the_lockfile</p><p>pods_deleted_from_the_lockfile</p><p>pods_unchanged_from_the_lockfile</p><p>locked_dependencies</p><p>specs_by_target</p><p>specifications</p><p>local_pods_by_target</p><p>local_pods</p><p>pods_to_install</p><p>pods_project</p><p>target_installers</p><p>generate_pods_by_podfile_state</p><p>display_pods_by_lockfile_state</p><p>update_repositories_if_needed</p><p>generate_locked_dependencies</p><p>resolve_dependencies</p><p>generate_pods_that_should_be_installed</p><p>generate_local_pods</p><p>prepare_for_legacy_compatibility</p><p>clean_global_support_files</p><p>clean_removed_pods</p><p>clean_pods_to_install</p><p>install_dependencies</p><p>install_local_pod</p><p>download_pod</p><p>generate_docs_if_needed</p><p>install_targets</p><p>prepare_pods_project</p><p>generate_target_installers</p><p>add_source_files_to_pods_project</p><p>run_pre_install_hooks</p><p>run_post_install_hooks</p><p>generate_target_support_files</p><p>generate_dummy_source</p><p>write_pod_project</p><p>write_lockfiles</p><p>integrate_user_project</p><p>config</p></div><div class="tab-pane" id="tab_sandbox"><h2>sandbox<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">sandbox</span> <span class="c1">#=&gt; Sandbox </span>
</pre></div><h3>Returns</h3><p><code><a href="../sandbox/index.html">Sandbox</a></code> The sandbox where the Pods should be installed.
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L61">lib/cocoapods/installer.rb:61</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_podfile"><h2>podfile<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">podfile</span> <span class="c1">#=&gt; Podfile </span>
</pre></div><h3>Returns</h3><p><code><a href="../../../cocoapods_core/pod/podfile/index.html">Podfile</a></code> <p>The Podfile specification that contains the information of the Pods
that should be installed.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L67">lib/cocoapods/installer.rb:67</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_lockfile"><h2>lockfile<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">lockfile</span> <span class="c1">#=&gt; Lockfile </span>
</pre></div><h3>Returns</h3><p><code><a href="../../../cocoapods_core/pod/lockfile/index.html">Lockfile</a></code> <p>The Lockfile that stores the information about the Pods previously
installed on any machine.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L73">lib/cocoapods/installer.rb:73</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_update_mode"><h2>update_mode<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">update_mode</span> <span class="c1">#=&gt; Bool </span>
</pre></div><h3>Returns</h3><p><code>Bool</code> <p>Whether the installer is in update mode. In update mode the contents of
the Lockfile are not taken into account for deciding what Pods to
install.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L80">lib/cocoapods/installer.rb:80</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_initialize"><h2>initialize</h2><h3>Signature</h3><div class="highlight"><pre><span class="kp">initialize</span><span class="p">(</span><span class="n">sandbox</span><span class="p">,</span> <span class="n">podfile</span><span class="p">,</span> <span class="n">lockfile</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">,</span> <span class="n">update_mode</span> <span class="o">=</span> <span class="kp">false</span><span class="p">)</span> <span class="c1">#=&gt; Installer </span>
</pre></div><h3>Parameters</h3><p><code>Sandbox</code><span> </span><b> sandbox</b></p><p>@see sandbox</p>
<p><code>Podfile</code><span> </span><b> podfile</b></p><p>@see podfile</p>
<p><code>Lockfile</code><span> </span><b> lockfile</b></p><p>@see lockfile</p>
<p><code>Bool</code><span> </span><b> update_mode</b></p><p>@see update_mode</p>
<h3>Returns</h3><p><code><a href="index.html">Installer</a></code> A new instance of Installer
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">sandbox</span><span class="p">,</span> <span class="n">podfile</span><span class="p">,</span> <span class="n">lockfile</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">,</span> <span class="n">update_mode</span> <span class="o">=</span> <span class="kp">false</span><span class="p">)</span>
  <span class="vi">@sandbox</span>     <span class="o">=</span>  <span class="n">sandbox</span>
  <span class="vi">@podfile</span>     <span class="o">=</span>  <span class="n">podfile</span>
  <span class="vi">@lockfile</span>    <span class="o">=</span>  <span class="n">lockfile</span>
  <span class="vi">@update_mode</span> <span class="o">=</span>  <span class="n">update_mode</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L87">lib/cocoapods/installer.rb:87</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_install_bang"><h2>install!</h2><p>Installs the Pods.</p>

<p>The installation process of is mostly linear with few minor complications
to keep in mind:</p>

<ul>
<li>The stored podspecs need to be cleaned before the resolution step
otherwise the sandbox might return an old podspec and not download
the new one from an external source.</li>
<li>The resolver might trigger the download of Pods from external sources
necessary to retrieve their podspec (unless it is instructed not to
do it).</li>
</ul>
<h3>Signature</h3><div class="highlight"><pre><span class="n">install!</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">install!</span>
  <span class="n">analyze</span>
  <span class="n">prepare_for_legacy_compatibility</span>
  <span class="n">clean_global_support_files</span>
  <span class="n">clean_removed_pods</span>
  <span class="n">clean_pods_to_install</span>
  <span class="n">install_dependencies</span>
  <span class="n">install_targets</span>
  <span class="n">write_lockfiles</span>
  <span class="n">integrate_user_project</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L111">lib/cocoapods/installer.rb:111</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_analyze"><h2>analyze</h2><p>Performs only the computation parts of an installation.</p>

<p>It is used by the <code>outdated</code> subcommand.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">analyze</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">analyze</span>
  <span class="n">generate_pods_by_podfile_state</span>
  <span class="n">update_repositories_if_needed</span>
  <span class="n">generate_locked_dependencies</span>
  <span class="n">resolve_dependencies</span>
  <span class="n">generate_local_pods</span>
  <span class="n">generate_pods_that_should_be_installed</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L130">lib/cocoapods/installer.rb:130</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_pods_added_from_the_lockfile"><h2>pods_added_from_the_lockfile<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">pods_added_from_the_lockfile</span> <span class="c1">#=&gt; Array&lt;String&gt; </span>
</pre></div><h3>Returns</h3><p><code>Array<String></code> <p>The names of the pods that were added to Podfile since the last
installation on any machine.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L149">lib/cocoapods/installer.rb:149</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_pods_changed_from_the_lockfile"><h2>pods_changed_from_the_lockfile<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">pods_changed_from_the_lockfile</span> <span class="c1">#=&gt; Array&lt;String&gt; </span>
</pre></div><h3>Returns</h3><p><code>Array<String></code> <p>The names of the pods whose version requirements in the Podfile are
incompatible with the version stored in the lockfile.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L155">lib/cocoapods/installer.rb:155</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_pods_deleted_from_the_lockfile"><h2>pods_deleted_from_the_lockfile<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">pods_deleted_from_the_lockfile</span> <span class="c1">#=&gt; Array&lt;String&gt; </span>
</pre></div><h3>Returns</h3><p><code>Array<String></code> <p>The names of the pods that were deleted from Podfile since the last
installation on any machine.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L161">lib/cocoapods/installer.rb:161</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_pods_unchanged_from_the_lockfile"><h2>pods_unchanged_from_the_lockfile<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">pods_unchanged_from_the_lockfile</span> <span class="c1">#=&gt; Array&lt;String&gt; </span>
</pre></div><h3>Returns</h3><p><code>Array<String></code> <p>The names of the pods that didn&#39;t change since the last installation on
any machine.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L167">lib/cocoapods/installer.rb:167</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_locked_dependencies"><h2>locked_dependencies<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">locked_dependencies</span> <span class="c1">#=&gt; Array&lt;Dependency&gt; </span>
</pre></div><h3>Returns</h3><p><code>Array<Dependency></code> <p>The dependencies generate by the lockfile that prevent the resolver to
update a Pod.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L173">lib/cocoapods/installer.rb:173</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_specs_by_target"><h2>specs_by_target<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">specs_by_target</span> <span class="c1">#=&gt; Hash{TargetDefinition =&gt; Array&lt;Spec&gt;} </span>
</pre></div><h3>Returns</h3><p><code>Hash{TargetDefinition => Array<Spec>}</code> <p>The specifications grouped by target as identified in the
resolve_dependencies step.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L179">lib/cocoapods/installer.rb:179</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_specifications"><h2>specifications<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">specifications</span> <span class="c1">#=&gt; Array&lt;Specification&gt; </span>
</pre></div><h3>Returns</h3><p><code>Array<Specification></code> <p>The specifications of the resolved version of Pods that should be
installed.</p>
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L185">lib/cocoapods/installer.rb:185</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_local_pods_by_target"><h2>local_pods_by_target<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">local_pods_by_target</span> <span class="c1">#=&gt; Hash{TargetDefinition =&gt; Array&lt;LocalPod&gt;} </span>
</pre></div><h3>Returns</h3><p><code>Hash{TargetDefinition => Array<LocalPod>}</code> The local pod instances grouped by target.
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L190">lib/cocoapods/installer.rb:190</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_local_pods"><h2>local_pods<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">local_pods</span> <span class="c1">#=&gt; Array&lt;LocalPod&gt; </span>
</pre></div><h3>Returns</h3><p><code>Array<LocalPod></code> The list of LocalPod instances for each dependency sorted by name.
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L195">lib/cocoapods/installer.rb:195</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_pods_to_install"><h2>pods_to_install<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">pods_to_install</span> <span class="c1">#=&gt; Array&lt;String&gt; </span>
</pre></div><h3>Returns</h3><p><code>Array<String></code> The Pods that should be installed.
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L200">lib/cocoapods/installer.rb:200</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_pods_project"><h2>pods_project<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">pods_project</span> <span class="c1">#=&gt; Pod::Project </span>
</pre></div><h3>Returns</h3><p><code><a href="../project/index.html">Pod::Project</a></code> The <code>Pods/Pods.xcodeproj</code> project.
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L211">lib/cocoapods/installer.rb:211</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_target_installers"><h2>target_installers<a class="select-tab" href=""><span class="label label-big">attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">target_installers</span> <span class="c1">#=&gt; Array&lt;TargetInstaller&gt; </span>
</pre></div><h3>Returns</h3><p><code>Array<TargetInstaller></code> </p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L215">lib/cocoapods/installer.rb:215</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_generate_pods_by_podfile_state"><h2>generate_pods_by_podfile_state</h2><p>Compares the <code><a href="../../../cocoapods_core/pod/podfile/index.html">Podfile</a></code> with the <code><a href="../../../cocoapods_core/pod/lockfile/index.html">Lockfile</a></code> in order to detect which
dependencies should be locked.</p>

<p>TODO: If there is not Lockfile all the Pods should be marked as added.</p>

<p>TODO: Once the manifest.lock is implemented only the unchanged pods
      should be tracked.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">generate_pods_by_podfile_state</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_pods_by_podfile_state</span>
  <span class="k">if</span> <span class="n">lockfile</span>
    <span class="no">UI</span><span class="o">.</span><span class="n">section</span> <span class="s2">&quot;Finding added, modified or removed dependencies:&quot;</span> <span class="k">do</span>
      <span class="n">pods_by_state</span> <span class="o">=</span> <span class="n">lockfile</span><span class="o">.</span><span class="n">detect_changes_with_podfile</span><span class="p">(</span><span class="n">podfile</span><span class="p">)</span>
      <span class="vi">@pods_added_from_the_lockfile</span>     <span class="o">=</span> <span class="n">pods_by_state</span><span class="o">[</span><span class="ss">:added</span><span class="o">]</span>     <span class="o">||</span> <span class="o">[]</span>
      <span class="vi">@pods_deleted_from_the_lockfile</span>   <span class="o">=</span> <span class="n">pods_by_state</span><span class="o">[</span><span class="ss">:removed</span><span class="o">]</span>   <span class="o">||</span> <span class="o">[]</span>
      <span class="vi">@pods_changed_from_the_lockfile</span>   <span class="o">=</span> <span class="n">pods_by_state</span><span class="o">[</span><span class="ss">:changed</span><span class="o">]</span>   <span class="o">||</span> <span class="o">[]</span>
      <span class="vi">@pods_unchanged_from_the_lockfile</span> <span class="o">=</span> <span class="n">pods_by_state</span><span class="o">[</span><span class="ss">:unchanged</span><span class="o">]</span> <span class="o">||</span> <span class="o">[]</span>
      <span class="n">display_pods_by_lockfile_state</span>
    <span class="k">end</span>
  <span class="k">else</span>
    <span class="vi">@pods_added_from_the_lockfile</span>     <span class="o">=</span> <span class="o">[]</span>
    <span class="vi">@pods_deleted_from_the_lockfile</span>   <span class="o">=</span> <span class="o">[]</span>
    <span class="vi">@pods_changed_from_the_lockfile</span>   <span class="o">=</span> <span class="o">[]</span>
    <span class="vi">@pods_unchanged_from_the_lockfile</span> <span class="o">=</span> <span class="o">[]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L233">lib/cocoapods/installer.rb:233</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_display_pods_by_lockfile_state"><h2>display_pods_by_lockfile_state</h2><p>Displays the state of each dependency.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">display_pods_by_lockfile_state</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">display_pods_by_lockfile_state</span>
  <span class="k">return</span> <span class="k">unless</span> <span class="n">config</span><span class="o">.</span><span class="n">verbose?</span>
  <span class="n">pods_added_from_the_lockfile</span>      <span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span> <span class="no">UI</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="o">.</span><span class="n">green</span>  <span class="o">+</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">pod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">pods_deleted_from_the_lockfile</span>    <span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span> <span class="no">UI</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="o">.</span><span class="n">red</span>    <span class="o">+</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">pod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">pods_changed_from_the_lockfile</span>    <span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span> <span class="no">UI</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="o">.</span><span class="n">yellow</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">pod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">pods_unchanged_from_the_lockfile</span>  <span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span> <span class="no">UI</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;-&quot;</span>        <span class="o">+</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">pod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L255">lib/cocoapods/installer.rb:255</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_update_repositories_if_needed"><h2>update_repositories_if_needed</h2><p>TODO: Remove the lockfile condition once compare_podfile_and_lockfile
      is updated.</p>

<p>TODO: Lazy resolution can&#39;t be done if we want to fully support detection
      of changes in specifications checksum.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">update_repositories_if_needed</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> <p>Lazily updates the source repositories. The update is
triggered if:
- There are pods that changed in the Podfile.
- The lockfile is missing.
- The installer is in update_mode.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">update_repositories_if_needed</span>
  <span class="k">return</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">skip_repo_update?</span>
  <span class="n">changed_pods</span> <span class="o">=</span> <span class="p">(</span><span class="n">pods_changed_from_the_lockfile</span> <span class="o">+</span> <span class="n">pods_deleted_from_the_lockfile</span><span class="p">)</span>
  <span class="n">should_update</span> <span class="o">=</span> <span class="o">!</span><span class="n">lockfile</span> <span class="o">||</span> <span class="o">!</span><span class="n">changed_pods</span><span class="o">.</span><span class="n">empty?</span> <span class="o">||</span> <span class="n">update_mode</span>
  <span class="k">if</span> <span class="n">should_update</span>
    <span class="no">UI</span><span class="o">.</span><span class="n">section</span> <span class="s1">&#39;Updating spec repositories&#39;</span> <span class="k">do</span>
      <span class="no">Command</span><span class="o">::</span><span class="no">Repo</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="no">Command</span><span class="o">::</span><span class="no">ARGV</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;update&quot;</span><span class="o">]</span><span class="p">))</span><span class="o">.</span><span class="n">run</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L275">lib/cocoapods/installer.rb:275</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_generate_locked_dependencies"><h2>generate_locked_dependencies</h2><p>Generates dependencies that require the specific version of the Pods that
haven&#39;t changed in the <code><a href="../../../cocoapods_core/pod/lockfile/index.html">Lockfile</a></code>.</p>

<p>These dependencies are passed to the <code><a href="../resolver/index.html">Resolver</a></code>, unless the installer is
in update mode, to prevent it from upgrading the Pods that weren&#39;t
changed in the <code><a href="../../../cocoapods_core/pod/podfile/index.html">Podfile</a></code>.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">generate_locked_dependencies</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_locked_dependencies</span>
  <span class="vi">@locked_dependencies</span> <span class="o">=</span> <span class="n">pods_unchanged_from_the_lockfile</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span>
    <span class="n">lockfile</span><span class="o">.</span><span class="n">dependency_for_installed_pod_named</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L295">lib/cocoapods/installer.rb:295</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_resolve_dependencies"><h2>resolve_dependencies</h2><p>Converts the Podfile in a list of specifications grouped by target.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">resolve_dependencies</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">resolve_dependencies</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">section</span> <span class="s2">&quot;Resolving dependencies of </span><span class="si">#{</span><span class="no">UI</span><span class="o">.</span><span class="n">path</span> <span class="n">podfile</span><span class="o">.</span><span class="n">defined_in_file</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">do</span>
    <span class="n">locked_deps</span> <span class="o">=</span> <span class="n">update_mode</span> <span class="p">?</span> <span class="o">[]</span> <span class="p">:</span> <span class="n">locked_dependencies</span>
    <span class="n">resolver</span> <span class="o">=</span> <span class="no">Resolver</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">sandbox</span><span class="p">,</span> <span class="n">podfile</span><span class="p">,</span> <span class="n">locked_deps</span><span class="p">)</span>
    <span class="n">resolver</span><span class="o">.</span><span class="n">update_external_specs</span> <span class="o">=</span> <span class="n">update_mode</span>
    <span class="vi">@specs_by_target</span> <span class="o">=</span> <span class="n">resolver</span><span class="o">.</span><span class="n">resolve</span>
    <span class="vi">@specifications</span>  <span class="o">=</span> <span class="n">specs_by_target</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">flatten</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L314">lib/cocoapods/installer.rb:314</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_generate_pods_that_should_be_installed"><h2>generate_pods_that_should_be_installed</h2><p>Computes the list of the Pods that should be installed or reinstalled in
the <code><a href="../sandbox/index.html">Sandbox</a></code>.</p>

<p>The pods to install are identified as the Pods that don&#39;t exist in the
sandbox or the Pods whose version differs from the one of the lockfile.</p>

<p>In update mode specs originating from external dependencies and or from
head sources are always reinstalled.</p>

<p>TODO: Use <code><a href="../sandbox/index.html">Sandbox</a></code> manifest.</p>

<p>TODO: [#534] Detect if the folder of a Pod is empty.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">generate_pods_that_should_be_installed</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_pods_that_should_be_installed</span>
  <span class="n">changed_pods_names</span> <span class="o">=</span> <span class="o">[]</span>
  <span class="k">if</span> <span class="n">lockfile</span>
    <span class="n">changed_pods</span> <span class="o">=</span> <span class="n">local_pods</span><span class="o">.</span><span class="n">select</span> <span class="k">do</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span>
      <span class="n">pod</span><span class="o">.</span><span class="n">top_specification</span><span class="o">.</span><span class="n">version</span> <span class="o">!=</span> <span class="n">lockfile</span><span class="o">.</span><span class="n">pod_versions</span><span class="o">[</span><span class="n">pod</span><span class="o">.</span><span class="n">name</span><span class="o">]</span>
    <span class="k">end</span>
    <span class="k">if</span> <span class="n">update_mode</span>
      <span class="n">changed_pods_names</span> <span class="o">+=</span> <span class="n">pods</span><span class="o">.</span><span class="n">select</span> <span class="k">do</span> <span class="o">|</span><span class="n">pods</span><span class="o">|</span>
        <span class="n">pod</span><span class="o">.</span><span class="n">top_specification</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">head?</span> <span class="o">||</span>
          <span class="n">resolver</span><span class="o">.</span><span class="n">pods_from_external_sources</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">pod</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="n">changed_pods_names</span> <span class="o">+=</span> <span class="n">pods_added_from_the_lockfile</span> <span class="o">+</span> <span class="n">pods_changed_from_the_lockfile</span>
  <span class="k">else</span>
    <span class="n">changed_pods</span> <span class="o">=</span> <span class="n">local_pods</span>
  <span class="k">end</span>

  <span class="n">not_existing_pods</span> <span class="o">=</span> <span class="n">local_pods</span><span class="o">.</span><span class="n">reject</span> <span class="p">{</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span> <span class="n">pod</span><span class="o">.</span><span class="n">exists?</span> <span class="p">}</span>
  <span class="vi">@pods_to_install</span> <span class="o">=</span> <span class="p">(</span><span class="n">changed_pods</span> <span class="o">+</span> <span class="n">not_existing_pods</span><span class="p">)</span><span class="o">.</span><span class="n">uniq</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L340">lib/cocoapods/installer.rb:340</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_generate_local_pods"><h2>generate_local_pods</h2><p>Converts the specifications produced by the Resolver in local pods.</p>

<p>The LocalPod class is responsible to handle the concrete representation
of a specification in the <code><a href="../sandbox/index.html">Sandbox</a></code>.</p>

<p>TODO: [#535] Pods should be accumulated per Target, also in the Local
      Pod class. The Local Pod class should have a method to add itself
      to a given project so it can use the sources of all the activated
      podspecs across all targets. Also cleaning should take into account
      that.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">generate_local_pods</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_local_pods</span>
  <span class="vi">@local_pods_by_target</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">specs_by_target</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">target_definition</span><span class="p">,</span> <span class="n">specs</span><span class="o">|</span>
    <span class="vi">@local_pods_by_target</span><span class="o">[</span><span class="n">target_definition</span><span class="o">]</span> <span class="o">=</span> <span class="n">specs</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">spec</span><span class="o">|</span>
      <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">local?</span>
        <span class="n">sandbox</span><span class="o">.</span><span class="n">locally_sourced_pod_for_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">target_definition</span><span class="o">.</span><span class="n">platform</span><span class="p">)</span>
      <span class="k">else</span>
        <span class="n">sandbox</span><span class="o">.</span><span class="n">local_pod_for_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">target_definition</span><span class="o">.</span><span class="n">platform</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span><span class="o">.</span><span class="n">uniq</span><span class="o">.</span><span class="n">compact</span>
  <span class="k">end</span>

  <span class="vi">@local_pods</span> <span class="o">=</span> <span class="n">local_pods_by_target</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">flatten</span><span class="o">.</span><span class="n">uniq</span><span class="o">.</span><span class="n">sort_by</span> <span class="p">{</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span> <span class="n">pod</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">downcase</span> <span class="p">}</span>
<span class="c1"># =======</span>
<span class="c1">#     def project</span>
<span class="c1">#       return @project if @project</span>
<span class="c1">#       @project = Pod::Project.new(sandbox)</span>
<span class="c1">#       # TODO</span>
<span class="c1">#       # @project.user_build_configurations = @podfile.user_build_configurations</span>
<span class="c1">#       pods.each { |p| p.add_file_references_to_project(@project) }</span>
<span class="c1">#       pods.each { |p| p.link_headers }</span>
<span class="c1">#       @project.add_podfile(config.project_podfile)</span>
<span class="c1">#       @project</span>
<span class="c1">#     end</span>
<span class="c1"># </span>
<span class="c1">#     def target_installers</span>
<span class="c1">#       @target_installers ||= @podfile.target_definitions.values.map do |definition|</span>
<span class="c1">#         pods_for_target = pods_by_target[definition]</span>
<span class="c1">#         TargetInstaller.new(project, definition, pods_for_target) unless definition.empty?</span>
<span class="c1">#       end.compact</span>
<span class="c1"># &gt;&gt;&gt;&gt;&gt;&gt;&gt; core-extraction</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L375">lib/cocoapods/installer.rb:375</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_prepare_for_legacy_compatibility"><h2>prepare_for_legacy_compatibility</h2><p>Prepares the Pods folder in order to be compatible with the most recent
version of CocoaPods.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">prepare_for_legacy_compatibility</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">prepare_for_legacy_compatibility</span>
  <span class="c1"># move_target_support_files_if_needed</span>
  <span class="c1"># copy_lock_file_to_Pods_lock_if_needed</span>
  <span class="c1"># move_Local_Podspecs_to_Podspecs_if_needed</span>
  <span class="c1"># move_pods_to_sources_folder_if_needed</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L419">lib/cocoapods/installer.rb:419</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_clean_global_support_files"><h2>clean_global_support_files</h2><p>@TODO: Clean the podspecs of all the pods that aren&#39;t unchanged so the
       resolution process doesn&#39;t get confused by them.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">clean_global_support_files</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> <p>In this step we clean all the folders that will be
regenerated from scratch and any file which might not be overwritten.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">clean_global_support_files</span>
  <span class="n">sandbox</span><span class="o">.</span><span class="n">prepare_for_install</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L432">lib/cocoapods/installer.rb:432</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_clean_removed_pods"><h2>clean_removed_pods</h2><p>@TODO: Use the local pod implode.
@TODO: [#534] Clean all the Pods folder that are not unchanged?</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">clean_removed_pods</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> <p>In this step we clean all the files related to the removed
Pods.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">clean_removed_pods</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">section</span> <span class="s2">&quot;Removing deleted dependencies&quot;</span> <span class="k">do</span>
    <span class="n">pods_deleted_from_the_lockfile</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">pod_name</span><span class="o">|</span>
      <span class="no">UI</span><span class="o">.</span><span class="n">section</span><span class="p">(</span><span class="s2">&quot;Removing </span><span class="si">#{</span><span class="n">pod_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;-&gt; &quot;</span><span class="o">.</span><span class="n">red</span><span class="p">)</span> <span class="k">do</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">sandbox</span><span class="o">.</span><span class="n">root</span> <span class="o">+</span> <span class="n">pod_name</span>
        <span class="n">path</span><span class="o">.</span><span class="n">rmtree</span> <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exist?</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span> <span class="k">unless</span> <span class="n">pods_deleted_from_the_lockfile</span><span class="o">.</span><span class="n">empty?</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L442">lib/cocoapods/installer.rb:442</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_clean_pods_to_install"><h2>clean_pods_to_install</h2><p>@TODO: [#247] Clean the headers of only the pods to install.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">clean_pods_to_install</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> <p>In this step we clean the files of the Pods that will be
installed. We clean the files that might affect the resolution process
and the files that might not be overwritten.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">clean_pods_to_install</span>

<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L459">lib/cocoapods/installer.rb:459</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_install_dependencies"><h2>install_dependencies</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">install_dependencies</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> <p>Install the Pods. If the resolver indicated that a Pod
should be installed and it exits, it is removed an then reinstalled. In
any case if the Pod doesn&#39;t exits it is installed.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">install_dependencies</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">section</span> <span class="s2">&quot;Downloading dependencies&quot;</span> <span class="k">do</span>
    <span class="n">local_pods</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span>
      <span class="k">if</span> <span class="n">pods_to_install</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
        <span class="no">UI</span><span class="o">.</span><span class="n">section</span><span class="p">(</span><span class="s2">&quot;Installing </span><span class="si">#{</span><span class="n">pod</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">green</span><span class="p">,</span> <span class="s2">&quot;-&gt; &quot;</span><span class="o">.</span><span class="n">green</span><span class="p">)</span> <span class="k">do</span>
          <span class="n">install_local_pod</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
        <span class="k">end</span>
      <span class="k">else</span>
        <span class="no">UI</span><span class="o">.</span><span class="n">section</span><span class="p">(</span><span class="s2">&quot;Using </span><span class="si">#{</span><span class="n">pod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;-&gt; &quot;</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L467">lib/cocoapods/installer.rb:467</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_install_local_pod"><h2>install_local_pod</h2><p>TODO: [#529] Podspecs should not be preserved anymore to prevent user
      confusion. Currently we are copying the ones form external sources
      in <code>Local Podspecs</code> and this feature is not needed anymore.
      I think that copying all the used podspecs would be helpful for
      debugging.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">install_local_pod</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> Downloads, clean and generates the documentation of a pod.
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">install_local_pod</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
  <span class="k">unless</span> <span class="n">pod</span><span class="o">.</span><span class="n">downloaded?</span>
    <span class="n">pod</span><span class="o">.</span><span class="n">implode</span>
    <span class="n">download_pod</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">generate_docs_if_needed</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
  <span class="n">pod</span><span class="o">.</span><span class="n">clean!</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">clean?</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L495">lib/cocoapods/installer.rb:495</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_download_pod"><h2>download_pod</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">download_pod</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> <p>Downloads a Pod forcing the `bleeding edge&#39; version if
requested.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">download_pod</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
  <span class="n">downloader</span> <span class="o">=</span> <span class="no">Downloader</span><span class="o">.</span><span class="n">for_pod</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">pod</span><span class="o">.</span><span class="n">top_specification</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">head?</span>
    <span class="k">if</span> <span class="n">downloader</span><span class="o">.</span><span class="n">respond_to?</span><span class="p">(</span><span class="ss">:download_head</span><span class="p">)</span>
      <span class="n">downloader</span><span class="o">.</span><span class="n">download_head</span>
    <span class="k">else</span>
      <span class="k">raise</span> <span class="no">Informative</span><span class="p">,</span>
        <span class="s2">&quot;The downloader of class `</span><span class="si">#{</span><span class="n">downloader</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; does not&quot;</span> <span class="p">\</span>
        <span class="s2">&quot;support the `:head&#39; option.&quot;</span>
    <span class="k">end</span>
  <span class="k">else</span>
    <span class="n">downloader</span><span class="o">.</span><span class="n">download</span>
  <span class="k">end</span>
  <span class="n">pod</span><span class="o">.</span><span class="n">downloaded</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L507">lib/cocoapods/installer.rb:507</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_generate_docs_if_needed"><h2>generate_docs_if_needed</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">generate_docs_if_needed</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> <p>Generates the documentation of a Pod unless it exists
for a given version.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_docs_if_needed</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
  <span class="n">doc_generator</span> <span class="o">=</span> <span class="no">Generator</span><span class="o">::</span><span class="no">Documentation</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">config</span><span class="o">.</span><span class="n">generate_docs?</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">doc_generator</span><span class="o">.</span><span class="n">already_installed?</span> <span class="p">)</span>
    <span class="no">UI</span><span class="o">.</span><span class="n">section</span> <span class="s2">&quot; &gt; Installing documentation&quot;</span>
    <span class="n">doc_generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">doc_install?</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="no">UI</span><span class="o">.</span><span class="n">section</span> <span class="s2">&quot; &gt; Using existing documentation&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L526">lib/cocoapods/installer.rb:526</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_install_targets"><h2>install_targets</h2><p>Creates and populates the targets of the pods project.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">install_targets</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">install_targets</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">section</span> <span class="s2">&quot;Generating support files&quot;</span> <span class="k">do</span>
    <span class="n">prepare_pods_project</span>
    <span class="n">generate_target_installers</span>
    <span class="n">add_source_files_to_pods_project</span>
    <span class="n">run_pre_install_hooks</span>
    <span class="n">generate_target_support_files</span>
    <span class="n">run_post_install_hooks</span>
    <span class="n">write_pod_project</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L543">lib/cocoapods/installer.rb:543</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_prepare_pods_project"><h2>prepare_pods_project</h2><p>Creates the Pods project from scratch if it doesn&#39;t exists.</p>

<p>TODO clean and modify the project if it exists.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">prepare_pods_project</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">prepare_pods_project</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;- Creating Pods project&quot;</span> <span class="k">do</span>
    <span class="vi">@pods_project</span> <span class="o">=</span> <span class="no">Pod</span><span class="o">::</span><span class="no">Project</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">sandbox</span><span class="p">)</span>
    <span class="c1"># TODO</span>
    <span class="c1"># pods_project.user_build_configurations = podfile.user_build_configurations</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L561">lib/cocoapods/installer.rb:561</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_generate_target_installers"><h2>generate_target_installers</h2><p>Creates a target installer for each definition not empty.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">generate_target_installers</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_target_installers</span>
  <span class="vi">@target_installers</span> <span class="o">=</span> <span class="n">podfile</span><span class="o">.</span><span class="n">target_definitions</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">definition</span><span class="o">|</span>
    <span class="n">pods_for_target</span> <span class="o">=</span> <span class="n">local_pods_by_target</span><span class="o">[</span><span class="n">definition</span><span class="o">]</span>
    <span class="no">TargetInstaller</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">pods_project</span><span class="p">,</span> <span class="n">definition</span><span class="p">,</span> <span class="n">pods_for_target</span><span class="p">)</span> <span class="k">unless</span> <span class="n">definition</span><span class="o">.</span><span class="n">empty?</span>
    <span class="c1"># TargetInstaller.new(podfile, pods_project, definition) unless definition.empty?</span>
  <span class="k">end</span><span class="o">.</span><span class="n">compact</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L573">lib/cocoapods/installer.rb:573</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_add_source_files_to_pods_project"><h2>add_source_files_to_pods_project</h2><p>Adds the source files of the Pods to the Pods project.</p>

<p>The source files are grouped by Pod and in turn by subspec
(recursively). Pods are generally added to the <code>Pods</code> group, however, if
they have a local source they are added to the <code>Local Pods</code> group.</p>

<p>TODO Clean the groups of the deleted Pods and add only the Pods that
     should be installed.</p>

<p>TODO [#588] Add file references for the resources of the Pods as well so
     they are visible for the user.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">add_source_files_to_pods_project</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">add_source_files_to_pods_project</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;- Adding source files to Pods project&quot;</span> <span class="k">do</span>
    <span class="n">local_pods</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="nb">p</span><span class="o">.</span><span class="n">add_file_references_to_project</span><span class="p">(</span><span class="n">pods_project</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">local_pods</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="nb">p</span><span class="o">.</span><span class="n">link_headers</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="c1"># &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span>
<span class="c1"># =======</span>
<span class="c1"># </span>
<span class="c1">#       UserProjectIntegrator.new(@podfile).integrate! if config.integrate_targets?</span>
<span class="c1"># &gt;&gt;&gt;&gt;&gt;&gt;&gt; core-extraction</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L595">lib/cocoapods/installer.rb:595</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_run_pre_install_hooks"><h2>run_pre_install_hooks</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">run_pre_install_hooks</span> <span class="c1">#=&gt; undefined</span>
</pre></div><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">run_pre_install_hooks</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;- Running pre install hooks&quot;</span> <span class="k">do</span>
    <span class="n">local_pods_by_target</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">target_definition</span><span class="p">,</span> <span class="n">pods</span><span class="o">|</span>
      <span class="n">pods</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span>
        <span class="n">pod</span><span class="o">.</span><span class="n">top_specification</span><span class="o">.</span><span class="n">pre_install</span><span class="p">(</span><span class="n">pod</span><span class="p">,</span> <span class="n">target_definition</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="vi">@podfile</span><span class="o">.</span><span class="n">pre_install!</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L607">lib/cocoapods/installer.rb:607</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_run_post_install_hooks"><h2>run_post_install_hooks</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">run_post_install_hooks</span> <span class="c1">#=&gt; undefined</span>
</pre></div><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">run_post_install_hooks</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;- Running post install hooks&quot;</span> <span class="k">do</span>
    <span class="c1"># we loop over target installers instead of pods, because we yield the</span>
    <span class="c1"># target installer to the spec post install hook.</span>
    <span class="n">target_installers</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">target_installer</span><span class="o">|</span>
      <span class="n">specs_by_target</span><span class="o">[</span><span class="n">target_installer</span><span class="o">.</span><span class="n">target_definition</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">spec</span><span class="o">|</span>
        <span class="n">spec</span><span class="o">.</span><span class="n">post_install</span><span class="p">(</span><span class="n">target_installer</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="vi">@podfile</span><span class="o">.</span><span class="n">post_install!</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L618">lib/cocoapods/installer.rb:618</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_generate_target_support_files"><h2>generate_target_support_files</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">generate_target_support_files</span> <span class="c1">#=&gt; undefined</span>
</pre></div><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_target_support_files</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">message</span><span class="s2">&quot;- Installing targets&quot;</span> <span class="k">do</span>
    <span class="n">target_installers</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">target_installer</span><span class="o">|</span>
      <span class="n">pods_for_target</span> <span class="o">=</span> <span class="n">local_pods_by_target</span><span class="o">[</span><span class="n">target_installer</span><span class="o">.</span><span class="n">target_definition</span><span class="o">]</span>
      <span class="n">target_installer</span><span class="o">.</span><span class="n">install!</span>
      <span class="c1"># TODO</span>
      <span class="n">acknowledgements_path</span> <span class="o">=</span> <span class="n">target_installer</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">acknowledgements_path</span>
      <span class="no">Generator</span><span class="o">::</span><span class="no">Acknowledgements</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">target_installer</span><span class="o">.</span><span class="n">target_definition</span><span class="p">,</span>
                                      <span class="n">pods_for_target</span><span class="p">)</span><span class="o">.</span><span class="n">save_as</span><span class="p">(</span><span class="n">acknowledgements_path</span><span class="p">)</span>
      <span class="n">generate_dummy_source</span><span class="p">(</span><span class="n">target_installer</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L631">lib/cocoapods/installer.rb:631</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_generate_dummy_source"><h2>generate_dummy_source</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">generate_dummy_source</span><span class="p">(</span><span class="n">target_installer</span><span class="p">)</span> <span class="c1">#=&gt; undefined</span>
</pre></div><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_dummy_source</span><span class="p">(</span><span class="n">target_installer</span><span class="p">)</span>
  <span class="n">class_name_identifier</span> <span class="o">=</span> <span class="n">target_installer</span><span class="o">.</span><span class="n">target_definition</span><span class="o">.</span><span class="n">label</span>
  <span class="n">dummy_source</span> <span class="o">=</span> <span class="no">Generator</span><span class="o">::</span><span class="no">DummySource</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">class_name_identifier</span><span class="p">)</span>
  <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">dummy_source</span><span class="o">.</span><span class="n">class_name</span><span class="si">}</span><span class="s2">.m&quot;</span>
  <span class="n">pathname</span> <span class="o">=</span> <span class="no">Pathname</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">sandbox</span><span class="o">.</span><span class="n">root</span> <span class="o">+</span> <span class="n">filename</span><span class="p">)</span>
  <span class="n">dummy_source</span><span class="o">.</span><span class="n">save_as</span><span class="p">(</span><span class="n">pathname</span><span class="p">)</span>
  <span class="n">file</span> <span class="o">=</span> <span class="n">pods_project</span><span class="o">.</span><span class="n">new_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;Targets Support Files&quot;</span><span class="p">)</span>
  <span class="n">target_installer</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">source_build_phase</span><span class="o">.</span><span class="n">add_file_reference</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L645">lib/cocoapods/installer.rb:645</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_write_pod_project"><h2>write_pod_project</h2><p>Writes the Pods project to the disk.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">write_pod_project</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">write_pod_project</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;- Writing Xcode project file to </span><span class="si">#{</span><span class="no">UI</span><span class="o">.</span><span class="n">path</span> <span class="vi">@sandbox</span><span class="o">.</span><span class="n">project_path</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">do</span>
    <span class="n">pods_project</span><span class="o">.</span><span class="n">save_as</span><span class="p">(</span><span class="vi">@sandbox</span><span class="o">.</span><span class="n">project_path</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L659">lib/cocoapods/installer.rb:659</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_write_lockfiles"><h2>write_lockfiles</h2><p>Writes the Podfile and the <code><a href="../sandbox/index.html">Sandbox</a></code> lock files.</p>

<p>TODO: [#552] Implement</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">write_lockfiles</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">write_lockfiles</span>
  <span class="vi">@lockfile</span> <span class="o">=</span> <span class="no">Lockfile</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">podfile</span><span class="p">,</span> <span class="n">specs_by_target</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">flatten</span><span class="p">)</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;- Writing Lockfile in </span><span class="si">#{</span><span class="no">UI</span><span class="o">.</span><span class="n">path</span> <span class="n">config</span><span class="o">.</span><span class="n">project_lockfile</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">do</span>
    <span class="vi">@lockfile</span><span class="o">.</span><span class="n">write_to_disk</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">project_lockfile</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="c1"># UI.message &quot;- Writing Manifest in #{UI.path sandbox.manifest_path}&quot; do</span>
  <span class="c1">#   @lockfile.write_to_disk(sandbox.manifest_path)</span>
  <span class="c1"># end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L671">lib/cocoapods/installer.rb:671</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_integrate_user_project"><h2>integrate_user_project</h2><p>Integrates the user project.</p>

<p>The following actions are performed:
  - libraries are added.
  - the build script are added.
  - the xcconfig files are set.</p>

<p>TODO: [#397] The libraries should be cleaned and the re-added on every
      installation. Maybe a clean_user_project phase should be added.</p>

<p>TODO: [#588] The resources should be added through a build phase instead
      of using a script.</p>
<h3>Signature</h3><div class="highlight"><pre><span class="n">integrate_user_project</span> <span class="c1">#=&gt; void </span>
</pre></div><h3>Returns</h3><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">integrate_user_project</span>
  <span class="no">UserProjectIntegrator</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">podfile</span><span class="p">,</span> <span class="n">pods_project</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">project_root</span><span class="p">)</span><span class="o">.</span><span class="n">integrate!</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">integrate_targets?</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/installer.rb#L697">lib/cocoapods/installer.rb:697</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/installer_spec.rb">spec/unit/installer_spec.rb</a></p></div><div class="tab-pane" id="tab_config"><h2>config</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">config</span> <span class="c1">#=&gt; undefined</span>
</pre></div><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">config</span>
  <span class="no">Config</span><span class="o">.</span><span class="n">instance</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/config.rb#L84">lib/cocoapods/config.rb:84</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/CocoaPods/blob/master/spec/unit/config_spec.rb">spec/unit/config_spec.rb</a></p></div></div></div></div><div id="footer"><hr /><p class="note">Generated for CocoaPods Core HEAD.</p></div></div></div></body></html>