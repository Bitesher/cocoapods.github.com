<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="documenation cocoapods objective-c packcage manager" name="keywords" /><title>Lockfile</title><link href="../../../favicon.ico" rel="icon" type="image/ico" /><link href="../../../css/bootstrap.min-52b04d8e.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../../../css/font-awesome-a5000aac.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../../../css/style-fc0fe55f.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../../../css/style2-7985d719.css" media="screen" rel="stylesheet" type="text/css" /><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script><script src="../../../js/bootstrap-308e23ce.js" type="text/javascript"></script>
<script src="../../../js/mousetrap.min-c31ccc6e.js" type="text/javascript"></script>
<script src="../../../js/javascript-ea658cd3.js" type="text/javascript"></script></head><body><div class="container"><div id="body"><div id="sections-container"><div class="row"><div class="span8"><ul class="breadcrumb"><li id="logo"><a href="http://cocoapods.org">CocoaPods</a><span class="divider">/</span></li><li><a href="../../../index.html">Docs</a><span class="divider">/</span></li><li><a href="../../index.html">CocoaPods-Core</a><span class="divider">/</span></li><li><a href="../index.html">Pod</a><span class="divider">/</span></li><li class="active">Lockfile</li></ul></div><div class="span2"><div class="form navbar-search"><input class="search-query typeahead" placeholder="Search - shortcut: s" type="text" /><i class="icon-search icon-search"></i></div></div></div></div><div class="page-container"><div id="tab-controller"><div id="methods-container"><div id="header"><h1><a class="select-tab" href="#tab_root_lockfile">Lockfile</a></h1></div></div><div class ='methods_list'><div class ='row'><div class ='span3'><p><a class='select-tab' href=#tab_internal_data>internal_data</a><span class='label label-small'>r</span></p><p><a class='select-tab' href=#tab_initialize>initialize</a></p><p><a class='select-tab' href=#tab_class_from_file>from_file</a><span class='label label-small'>+</span></p><p><a class='select-tab' href=#tab_defined_in_file>defined_in_file</a><span class='label label-small'>a</span></p><p><a class='select-tab' href=#tab_to_s>to_s</a></p><p><a class='select-tab' href=#tab_inspect>inspect</a></p></div><div class ='span3'><p><a class='select-tab' href=#tab_pod_names>pod_names</a></p><p><a class='select-tab' href=#tab_pod_versions>pod_versions</a></p><p><a class='select-tab' href=#tab_dependencies>dependencies</a></p><p><a class='select-tab' href=#tab_dependency_to_lock_pod_named>dependency_to_lock_pod_named</a></p><p><a class='select-tab' href=#tab_generate_pod_names_and_versions>generate_pod_names_and_versions</a></p><p><a class='select-tab' href=#tab_external_sources>external_sources</a></p></div><div class ='span3'><p><a class='select-tab' href=#tab_detect_changes_with_podfile>detect_changes_with_podfile</a></p><p><a class='select-tab' href=#tab_write_to_disk>write_to_disk</a></p><p><a class='select-tab' href=#tab_to_yaml>to_yaml</a></p><p><a class='select-tab' href=#tab_class_generate>generate</a><span class='label label-small'>+</span></p><p><a class='select-tab' href=#tab_class_generate_pods_data>generate_pods_data</a><span class='label label-small'>+</span></p><p><a class='select-tab' href=#tab_class_generate_dependencies_data>generate_dependencies_data</a><span class='label label-small'>+</span></p></div><div class ='span3'><p><a class='select-tab' href=#tab_class_generate_external_sources_data>generate_external_sources_data</a><span class='label label-small'>+</span></p><p><a class='select-tab' href=#tab_class_generate_checksums>generate_checksums</a><span class='label label-small'>+</span></p></div></div></div></div><div id="content-container"><div class="tab-content"><div class="tab-pane" id="tab_root_lockfile"><h2>Lockfile</h2><p>The <code><a href="index.html">Lockfile</a></code> stores information about the pods that were installed by
CocoaPods.</p>

<p>It is used in combination with the Podfile to resolve the exact version of
the Pods that should be installed (i.e. to prevent <code>pod install</code> from
upgrading dependencies).</p>

<p>Moreover it is used as a manifest of an installation to detect which Pods
need to be installed or removed.</p>
<h3>Inherits from:</h3><p><code><a href="../../../xcodeproj/object/index.html">Object</a></code></p></div><div class="tab-pane" id="tab_group_"><h2></h2><p>internal_data</p><p>initialize</p><p>from_file</p><p>defined_in_file</p><p>to_s</p><p>inspect</p><p>pod_names</p><p>pod_versions</p><p>dependencies</p><p>dependency_to_lock_pod_named</p><p>generate_pod_names_and_versions</p><p>external_sources</p><p>detect_changes_with_podfile</p><p>write_to_disk</p><p>to_yaml</p><p>generate</p><p>generate_pods_data</p><p>generate_dependencies_data</p><p>generate_external_sources_data</p><p>generate_checksums</p></div><div class="tab-pane" id="tab_internal_data"><h2>internal_data<a class="select-tab" href=""><span class="label label-big">attribute reader</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">internal_data</span> <span class="c1">#=&gt; String </span>
</pre></div><h4>Returns</h4><p><code>String</code> The hash used to initialize the Lockfile.
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L17">lib/cocoapods-core/lockfile.rb:17</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_initialize"><h2>initialize</h2><h3>Signature</h3><div class="highlight"><pre><span class="kp">initialize</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span> <span class="c1">#=&gt; Lockfile </span>
</pre></div><h4>Parameters</h4><p><code>Hash</code><span> </span><b> hash</b></p><p>A hash representation of the Lockfile.</p>
<h4>Returns</h4><p><code><a href="index.html">Lockfile</a></code> A new instance of Lockfile
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
  <span class="vi">@internal_data</span> <span class="o">=</span> <span class="nb">hash</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L22">lib/cocoapods-core/lockfile.rb:22</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_class_from_file"><h2>from_file<a class="select-tab" href=""><span class="label label-big">class method</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">from_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="c1">#=&gt; Lockfile </span>
</pre></div><h4>Parameters</h4><p><code>Pathname</code><span> </span><b> path</b></p><p>The path where the lockfile is serialized.</p>
<h4>Returns</h4><p><code><a href="index.html">Lockfile</a></code> A new lockfile.
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">from_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
  <span class="k">return</span> <span class="kp">nil</span> <span class="k">unless</span> <span class="n">path</span><span class="o">.</span><span class="n">exist?</span>
  <span class="k">begin</span>
    <span class="nb">hash</span> <span class="o">=</span> <span class="no">YAML</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
  <span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>
    <span class="k">raise</span> <span class="no">StandardError</span><span class="p">,</span> <span class="s2">&quot;Podfile.lock syntax error:  </span><span class="si">#{</span><span class="n">e</span><span class="o">.</span><span class="n">inspect</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="k">end</span>
  <span class="n">lockfile</span> <span class="o">=</span> <span class="no">Lockfile</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
  <span class="n">lockfile</span><span class="o">.</span><span class="n">defined_in_file</span> <span class="o">=</span> <span class="n">path</span>
  <span class="n">lockfile</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L37">lib/cocoapods-core/lockfile.rb:37</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_defined_in_file"><h2>defined_in_file<a class="select-tab" href=""><span class="label label-big">readwrite attribute</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">defined_in_file</span> <span class="c1">#=&gt; String </span>
</pre></div><h4>Returns</h4><p><code>String</code> The file where the Lockfile is serialized.
</p><h3>Signature</h3><div class="highlight"><pre><span class="n">defined_in_file</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="c1">#=&gt; String </span>
</pre></div><h4>Returns</h4><p><code>String</code> The file where the Lockfile is serialized.
</p><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L51">lib/cocoapods-core/lockfile.rb:51</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_to_s"><h2>to_s</h2><h3>Signature</h3><div class="highlight"><pre><span class="nb">to_s</span> <span class="c1">#=&gt; String </span>
</pre></div><h4>Returns</h4><p><code>String</code> A string representation suitable for UI output.
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">to_s</span>
  <span class="s2">&quot;Podfile.lock&quot;</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L55">lib/cocoapods-core/lockfile.rb:55</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_inspect"><h2>inspect</h2><h3>Signature</h3><div class="highlight"><pre><span class="nb">inspect</span> <span class="c1">#=&gt; String </span>
</pre></div><h4>Returns</h4><p><code>String</code> A string representation suitable for debugging.
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">inspect</span>
  <span class="s2">&quot;#&lt;</span><span class="si">#{</span><span class="nb">self</span><span class="o">.</span><span class="n">class</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L61">lib/cocoapods-core/lockfile.rb:61</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_pod_names"><h2>pod_names</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">pod_names</span> <span class="c1">#=&gt; Array&lt;String&gt; </span>
</pre></div><h4>Returns</h4><p><code>Array<String></code> The names of the installed Pods.
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">pod_names</span>
  <span class="n">generate_pod_names_and_versions</span> <span class="k">unless</span> <span class="vi">@pod_names</span>
  <span class="vi">@pod_names</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L73">lib/cocoapods-core/lockfile.rb:73</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_pod_versions"><h2>pod_versions</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">pod_versions</span> <span class="c1">#=&gt; Hash{String =&gt; Version} </span>
</pre></div><h4>Returns</h4><p><code>Hash{String => Version}</code> <p>A Hash containing the name of the root
specification of the installed Pods as the keys and their
corresponding {Version} as the values.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">pod_versions</span>
  <span class="n">generate_pod_names_and_versions</span> <span class="k">unless</span> <span class="vi">@pod_versions</span>
  <span class="vi">@pod_versions</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L82">lib/cocoapods-core/lockfile.rb:82</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_dependencies"><h2>dependencies</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">dependencies</span> <span class="c1">#=&gt; Array&lt;Dependency&gt; </span>
</pre></div><h4>Returns</h4><p><code>Array<Dependency></code> <p>The dependencies of the Podfile used for the
last installation.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">dependencies</span>
  <span class="k">unless</span> <span class="vi">@dependencies</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">internal_data</span><span class="o">[</span><span class="s1">&#39;DEPENDENCIES&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="o">[]</span>
    <span class="vi">@dependencies</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">string</span><span class="o">|</span>
      <span class="n">dep</span> <span class="o">=</span> <span class="no">Dependency</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
      <span class="n">dep</span><span class="o">.</span><span class="n">external_source</span> <span class="o">=</span> <span class="n">external_sources</span><span class="o">[</span><span class="n">dep</span><span class="o">.</span><span class="n">root_name</span><span class="o">]</span>
      <span class="n">dep</span>
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="vi">@dependencies</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L93">lib/cocoapods-core/lockfile.rb:93</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_dependency_to_lock_pod_named"><h2>dependency_to_lock_pod_named</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">dependency_to_lock_pod_named</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span> <span class="c1">#=&gt; Dependency </span>
</pre></div><h4>Parameters</h4><p><code>String</code><span> </span><b> name</b></p><p>The name of the Pod</p>
<h4>Returns</h4><p><code><a href="../dependency/index.html">Dependency</a></code> The generated dependency.
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">dependency_to_lock_pod_named</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="n">dep</span> <span class="o">=</span> <span class="n">dependencies</span><span class="o">.</span><span class="n">find</span> <span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="n">d</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">name</span> <span class="p">}</span>
  <span class="n">version</span> <span class="o">=</span> <span class="n">pod_versions</span><span class="o">[</span><span class="nb">name</span><span class="o">]</span>

  <span class="k">unless</span> <span class="n">dep</span>
    <span class="k">raise</span> <span class="no">StandardError</span><span class="p">,</span> <span class="s2">&quot;Attempt to lock the `</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">` Pod without an known dependency.&quot;</span>
  <span class="k">end</span>

  <span class="k">unless</span> <span class="n">version</span>
    <span class="k">raise</span> <span class="no">StandardError</span><span class="p">,</span> <span class="s2">&quot;Attempt to lock the `</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">` Pod without an known version.&quot;</span>
  <span class="k">end</span>

  <span class="n">locked_dependency</span> <span class="o">=</span> <span class="n">dep</span><span class="o">.</span><span class="n">dup</span>
  <span class="n">locked_dependency</span><span class="o">.</span><span class="n">specific_version</span> <span class="o">=</span> <span class="n">version</span>
  <span class="n">locked_dependency</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L118">lib/cocoapods-core/lockfile.rb:118</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_generate_pod_names_and_versions"><h2>generate_pod_names_and_versions</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">generate_pod_names_and_versions</span> <span class="c1">#=&gt; Array&lt;String, Hash{String =&gt; Array[String]}&gt; </span>
</pre></div><h4>Returns</h4><p><code>Array<String, Hash{String => Array[String]}></code> <p>The pods installed
and their dependencies.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_pod_names_and_versions</span>
  <span class="vi">@pod_names</span>    <span class="o">=</span> <span class="o">[]</span>
  <span class="vi">@pod_versions</span> <span class="o">=</span> <span class="p">{}</span>

  <span class="k">return</span> <span class="k">unless</span> <span class="n">pods</span> <span class="o">=</span> <span class="n">internal_data</span><span class="o">[</span><span class="s1">&#39;PODS&#39;</span><span class="o">]</span>
  <span class="n">pods</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">pod</span><span class="o">|</span>
    <span class="n">pod</span> <span class="o">=</span> <span class="n">pod</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">first</span> <span class="k">unless</span> <span class="n">pod</span><span class="o">.</span><span class="n">is_a?</span><span class="p">(</span><span class="nb">String</span><span class="p">)</span>
    <span class="nb">name</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="no">Spec</span><span class="o">.</span><span class="n">name_and_version_from_string</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span>
    <span class="vi">@pod_names</span> <span class="o">&lt;&lt;</span> <span class="nb">name</span>
    <span class="vi">@pod_versions</span><span class="o">[</span><span class="nb">name</span><span class="o">]</span> <span class="o">=</span> <span class="n">version</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L142">lib/cocoapods-core/lockfile.rb:142</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_external_sources"><h2>external_sources</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">external_sources</span> <span class="c1">#=&gt; Hash{String =&gt; Hash} </span>
</pre></div><h4>Returns</h4><p><code>Hash{String => Hash}</code> <p>A hash where the name of the pods are the
keys and the values are the external source hash the dependency
that required the pod.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">external_sources</span>
  <span class="vi">@external_sources</span> <span class="o">||=</span> <span class="n">internal_data</span><span class="o">[</span><span class="s2">&quot;EXTERNAL SOURCES&quot;</span><span class="o">]</span> <span class="o">||</span> <span class="p">{}</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L159">lib/cocoapods-core/lockfile.rb:159</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_detect_changes_with_podfile"><h2>detect_changes_with_podfile</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">detect_changes_with_podfile</span><span class="p">(</span><span class="n">podfile</span><span class="p">)</span> <span class="c1">#=&gt; Hash{Symbol=&gt;Array[Strings]} </span>
</pre></div><h4>Parameters</h4><p><code>Podfile</code><span> </span><b> podfile</b></p><p>The podfile that should be analyzed.</p>
<h4>Returns</h4><p><code>Hash{Symbol=>Array[Strings]}</code> <p>A hash where pods are grouped
by the state in which they are.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">detect_changes_with_podfile</span><span class="p">(</span><span class="n">podfile</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="o">[</span> <span class="ss">:added</span><span class="p">,</span> <span class="ss">:changed</span><span class="p">,</span> <span class="ss">:removed</span><span class="p">,</span> <span class="ss">:unchanged</span> <span class="o">].</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="o">|</span> <span class="n">result</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="o">[]</span> <span class="p">}</span>

  <span class="n">installed_deps</span> <span class="o">=</span> <span class="n">dependencies</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="n">dependency_to_lock_pod_named</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">all_dep_names</span>  <span class="o">=</span> <span class="p">(</span><span class="n">dependencies</span> <span class="o">+</span> <span class="n">podfile</span><span class="o">.</span><span class="n">dependencies</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:name</span><span class="p">)</span><span class="o">.</span><span class="n">uniq</span>
  <span class="n">all_dep_names</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
    <span class="n">installed_dep</span> <span class="o">=</span> <span class="n">installed_deps</span><span class="o">.</span><span class="n">find</span> <span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="n">d</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">name</span> <span class="p">}</span>
    <span class="n">podfile_dep</span>   <span class="o">=</span> <span class="n">podfile</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">find</span> <span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="n">d</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">name</span> <span class="p">}</span>

    <span class="k">if</span> <span class="n">installed_dep</span><span class="o">.</span><span class="n">nil?</span>  <span class="k">then</span> <span class="n">key</span> <span class="o">=</span> <span class="ss">:added</span>
    <span class="k">elsif</span> <span class="n">podfile_dep</span><span class="o">.</span><span class="n">nil?</span> <span class="k">then</span> <span class="n">key</span> <span class="o">=</span> <span class="ss">:removed</span>
    <span class="k">elsif</span> <span class="n">podfile_dep</span><span class="o">.</span><span class="n">compatible?</span><span class="p">(</span><span class="n">installed_dep</span> <span class="p">)</span> <span class="k">then</span> <span class="n">key</span> <span class="o">=</span> <span class="ss">:unchanged</span>
    <span class="k">else</span> <span class="n">key</span> <span class="o">=</span> <span class="ss">:changed</span>
    <span class="k">end</span>
    <span class="n">result</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="nb">name</span>
  <span class="k">end</span>
  <span class="n">result</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L190">lib/cocoapods-core/lockfile.rb:190</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_write_to_disk"><h2>write_to_disk</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">write_to_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="c1">#=&gt; void </span>
</pre></div><h4>Parameters</h4><p><code>Pathname</code><span> </span><b> path</b></p><p>The path where the lockfile should be saved.</p>
<h4>Returns</h4><p><code>void</code> </p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">write_to_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
  <span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="o">.</span><span class="n">mkpath</span> <span class="k">unless</span> <span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="o">.</span><span class="n">exist?</span>
  <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">to_yaml</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">defined_in_file</span> <span class="o">=</span> <span class="n">path</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L223">lib/cocoapods-core/lockfile.rb:223</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_to_yaml"><h2>to_yaml</h2><h3>Signature</h3><div class="highlight"><pre><span class="n">to_yaml</span> <span class="c1">#=&gt; String </span>
</pre></div><h4>Returns</h4><p><code>String</code> <p>The YAML representation of the Lockfile, used for
serialization.</p>
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">to_yaml</span>
  <span class="n">yaml_data</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">internal_data</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
    <span class="n">yaml_data</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="o">=</span> <span class="n">value</span> <span class="k">unless</span> <span class="n">value</span><span class="o">.</span><span class="n">empty?</span>
  <span class="k">end</span>
  <span class="n">yaml_data</span><span class="o">.</span><span class="n">to_yaml</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/^--- ?\n/</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/^([A-Z])/</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n\\</span><span class="s2">1&quot;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L236">lib/cocoapods-core/lockfile.rb:236</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_class_generate"><h2>generate<a class="select-tab" href=""><span class="label label-big">class method</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">generate</span><span class="p">(</span><span class="n">podfile</span><span class="p">,</span> <span class="n">specs</span><span class="p">)</span> <span class="c1">#=&gt; Lockfile </span>
</pre></div><h4>Parameters</h4><p><code>Podfile</code><span> </span><b> podfile</b></p><p>The podfile that should be used to generate the lockfile.</p>
<p><code>Array&lt;Specification&gt;</code><span> </span><b> specs</b></p><p>An array containing the podspec that were generated by
resolving the given podfile.</p>
<h4>Returns</h4><p><code><a href="index.html">Lockfile</a></code> A new lockfile.
</p><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">podfile</span><span class="p">,</span> <span class="n">specs</span><span class="p">)</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;PODS&#39;</span>             <span class="o">=&gt;</span> <span class="n">generate_pods_data</span><span class="p">(</span><span class="n">podfile</span><span class="p">,</span> <span class="n">specs</span><span class="p">),</span>
    <span class="s1">&#39;DEPENDENCIES&#39;</span>     <span class="o">=&gt;</span> <span class="n">generate_dependencies_data</span><span class="p">(</span><span class="n">podfile</span><span class="p">),</span>
    <span class="s1">&#39;EXTERNAL SOURCES&#39;</span> <span class="o">=&gt;</span> <span class="n">generate_external_sources_data</span><span class="p">(</span><span class="n">podfile</span><span class="p">),</span>
    <span class="s1">&#39;SPEC CHECKSUMS&#39;</span>   <span class="o">=&gt;</span> <span class="n">generate_checksums</span><span class="p">(</span><span class="n">specs</span><span class="p">),</span>
    <span class="s1">&#39;COCOAPODS CORE&#39;</span>   <span class="o">=&gt;</span> <span class="no">CORE_VERSION</span>
  <span class="p">}</span>
  <span class="no">Lockfile</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L265">lib/cocoapods-core/lockfile.rb:265</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_class_generate_pods_data"><h2>generate_pods_data<a class="select-tab" href=""><span class="label label-big">class method</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">generate_pods_data</span><span class="p">(</span><span class="n">podfile</span><span class="p">,</span> <span class="n">specs</span><span class="p">)</span> <span class="c1">#=&gt; Array </span>
</pre></div><h4>Returns</h4><p><code><a href="../../../xcodeproj/array/index.html">Array</a></code> The generated data.
</p><hr /><h3>Examples:</h3><p>Output</p><div class="highlight"><pre><span class="o">[</span> <span class="p">{</span><span class="s2">&quot;BananaLib (1.0)&quot;</span><span class="o">=&gt;[</span><span class="s2">&quot;monkey (&lt; 1.0.9, ~&gt; 1.0.1)&quot;</span><span class="o">]</span><span class="p">},</span>
</pre></div><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_pods_data</span><span class="p">(</span><span class="n">podfile</span><span class="p">,</span> <span class="n">specs</span><span class="p">)</span>
  <span class="n">pod_and_deps</span> <span class="o">=</span> <span class="n">specs</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">spec</span><span class="o">|</span>
    <span class="o">[</span><span class="n">spec</span><span class="o">.</span><span class="n">to_s</span><span class="p">,</span> <span class="n">spec</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="o">]</span>
  <span class="k">end</span><span class="o">.</span><span class="n">uniq</span>

  <span class="n">tmp</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">pod_and_deps</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">deps</span><span class="o">|</span>
    <span class="k">if</span> <span class="n">tmp</span><span class="o">[</span><span class="nb">name</span><span class="o">]</span>
      <span class="n">tmp</span><span class="o">[</span><span class="nb">name</span><span class="o">].</span><span class="n">concat</span><span class="p">(</span><span class="n">deps</span><span class="p">)</span><span class="o">.</span><span class="n">uniq!</span>
    <span class="k">else</span>
      <span class="n">tmp</span><span class="o">[</span><span class="nb">name</span><span class="o">]</span> <span class="o">=</span> <span class="n">deps</span>
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="n">pod_and_deps</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:first</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">deps</span><span class="o">|</span>
    <span class="n">deps</span><span class="o">.</span><span class="n">empty?</span> <span class="p">?</span> <span class="nb">name</span> <span class="p">:</span> <span class="p">{</span> <span class="nb">name</span> <span class="o">=&gt;</span> <span class="n">deps</span> <span class="p">}</span>
  <span class="k">end</span>
  <span class="n">pod_and_deps</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L291">lib/cocoapods-core/lockfile.rb:291</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_class_generate_dependencies_data"><h2>generate_dependencies_data<a class="select-tab" href=""><span class="label label-big">class method</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">generate_dependencies_data</span><span class="p">(</span><span class="n">podfile</span><span class="p">)</span> <span class="c1">#=&gt; Array </span>
</pre></div><h4>Returns</h4><p><code><a href="../../../xcodeproj/array/index.html">Array</a></code> The generated data.
</p><hr /><h3>Examples:</h3><p>Output</p><div class="highlight"><pre><span class="o">[</span> <span class="s2">&quot;BananaLib (~&gt; 1.0)&quot;</span><span class="p">,</span>
  <span class="s2">&quot;JSONKit (from `path/JSONKit.podspec&#39;)&quot;</span> <span class="o">]</span>
</pre></div><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_dependencies_data</span><span class="p">(</span><span class="n">podfile</span><span class="p">)</span>
  <span class="n">podfile</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">map</span><span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="n">d</span><span class="o">.</span><span class="n">to_s</span> <span class="p">}</span><span class="o">.</span><span class="n">sort</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L318">lib/cocoapods-core/lockfile.rb:318</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_class_generate_external_sources_data"><h2>generate_external_sources_data<a class="select-tab" href=""><span class="label label-big">class method</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">generate_external_sources_data</span><span class="p">(</span><span class="n">podfile</span><span class="p">)</span> <span class="c1">#=&gt; Hash </span>
</pre></div><h4>Returns</h4><p><code><a href="../../../xcodeproj/hash/index.html">Hash</a></code> <p>A hash where the keys are the names of the pods and
the values store the external source hashes of each
dependency.</p>
</p><hr /><h3>Examples:</h3><p>Output</p><div class="highlight"><pre><span class="p">{</span> <span class="s2">&quot;JSONKit&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="ss">:podspec</span><span class="o">=&gt;</span><span class="s2">&quot;path/JSONKit.podspec&quot;</span><span class="p">}</span> <span class="p">}</span>
</pre></div><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_external_sources_data</span><span class="p">(</span><span class="n">podfile</span><span class="p">)</span>
  <span class="n">deps</span> <span class="o">=</span> <span class="n">podfile</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:external?</span><span class="p">)</span>
  <span class="n">deps</span> <span class="o">=</span> <span class="n">deps</span><span class="o">.</span><span class="n">sort</span> <span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="p">,</span> <span class="n">other</span><span class="o">|</span> <span class="n">d</span><span class="o">.</span><span class="n">name</span> <span class="o">&lt;=&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
  <span class="n">sources</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">deps</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="n">sources</span><span class="o">[</span><span class="n">d</span><span class="o">.</span><span class="n">root_name</span><span class="o">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">external_source</span> <span class="p">}</span>
  <span class="n">sources</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L335">lib/cocoapods-core/lockfile.rb:335</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div><div class="tab-pane" id="tab_class_generate_checksums"><h2>generate_checksums<a class="select-tab" href=""><span class="label label-big">class method</span></a></h2><h3>Signature</h3><div class="highlight"><pre><span class="n">generate_checksums</span><span class="p">(</span><span class="n">specs</span><span class="p">)</span> <span class="c1">#=&gt; Hash </span>
</pre></div><h4>Returns</h4><p><code><a href="../../../xcodeproj/hash/index.html">Hash</a></code> <p>A hash where the keys are the names of the root
specifications and the values are the SHA1 diggest of the
podspec file.</p>
</p><hr /><h3>Examples:</h3><p>Output</p><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;BananaLib&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;9906b267592664126923875ce2c8d03824372c79&quot;</span><span class="p">,</span>
  <span class="s2">&quot;JSONKit&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;92ae5f71b77c8dec0cd8d0744adab79d38560949&quot;</span>
<span class="p">}</span>
</pre></div><h3>Source</h3><div class="highlight"><pre><span class="k">def</span> <span class="nf">generate_checksums</span><span class="p">(</span><span class="n">specs</span><span class="p">)</span>
  <span class="nb">require</span> <span class="s1">&#39;digest&#39;</span>
  <span class="n">checksums</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">specs</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">spec</span><span class="o">|</span> <span class="o">!</span><span class="n">spec</span><span class="o">.</span><span class="n">defined_in_file</span><span class="o">.</span><span class="n">nil?</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">spec</span><span class="o">|</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="no">Digest</span><span class="o">::</span><span class="no">SHA1</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">defined_in_file</span><span class="p">))</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="n">checksum</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;UTF-8&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">checksum</span><span class="o">.</span><span class="n">respond_to?</span><span class="p">(</span><span class="ss">:encode</span><span class="p">)</span>
    <span class="n">checksums</span><span class="o">[</span><span class="n">spec</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">name</span><span class="o">]</span> <span class="o">=</span> <span class="n">checksum</span>
  <span class="k">end</span>
  <span class="n">checksums</span>
<span class="k">end</span>
</pre></div><h3>Source Files</h3><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/lib/cocoapods-core/lockfile.rb#L355">lib/cocoapods-core/lockfile.rb:355</a></p><p class="source_file"><i class="icon-link"></i> <a href="https://github.com/CocoaPods/Core/blob/master/spec/lockfile_spec.rb">spec/lockfile_spec.rb</a></p></div></div></div></div><div id="footer"><hr /><p class="note">Generated for CocoaPods Core HEAD.</p></div></div></div><div class="modal hide" id="search"><div class="modal-header"><button aria-hidden="true" class="close" data-dismiss="modal" type="button">&times;</button><h3>Search</h3></div><div class="modal-body"><p>test</p></div></div></body></html>